@{
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
    ViewData["Title"] = "Tạo Tin Tức Mới";
}

<h1 class="text-start" style="font-family: Lexend; font-weight: 500; font-size: 30px;">@ViewData["Title"]</h1>

<!-- Display success or error message -->
@if (TempData["SuccessMessage"] != null)
{
    <div class="alert alert-success">
        @TempData["SuccessMessage"]
    </div>
}
@if (TempData["ErrorMessage"] != null)
{
    <div class="alert alert-danger">
        @TempData["ErrorMessage"]
    </div>
}

<form asp-action="Create" method="post" enctype="multipart/form-data">
    <div class="form-group">
        <label for="tieude">Title</label>
        <input type="text" class="form-control" id="tieude" name="tieude" value="@Model.tieude" required />
        @if (ViewData.ModelState["tieude"]?.Errors.Count > 0)
        {
            <span class="text-danger">@ViewData.ModelState["tieude"]?.Errors[0]?.ErrorMessage</span>
        }
    </div>

    <div class="form-group">
        <label for="hinhnen">Image</label>
        <input type="file" class="form-control" id="hinhnen" name="hinhnen" />
    </div>

    <div class="form-group">
        <label for="tomtat">Summary</label>
        <input type="text" class="form-control" id="tomtat" name="tomtat" value="@Model.tomtat" />
    </div>

    <div class="form-group">
        <label for="slug">Slug</label>
        <input type="text" class="form-control" id="slug" name="slug" value="@Model.slug" required />
        @if (ViewData.ModelState["slug"]?.Errors.Count > 0)
        {
            <span class="text-danger">@ViewData.ModelState["slug"]?.Errors[0]?.ErrorMessage</span>
        }
    </div>

    <div class="form-group">
        <label for="noidung">Content</label>
        <textarea class="form-control" id="noidung" name="noidung" rows="5" required>@Model.noidung</textarea>
        @if (ViewData.ModelState["noidung"]?.Errors.Count > 0)
        {
            <span class="text-danger">@ViewData.ModelState["noidung"]?.Errors[0]?.ErrorMessage</span>
        }
    </div>

    <div class="form-group">
        <label for="luotxem">Views</label>
        <input type="number" class="form-control" id="luotxem" name="luotxem" value="@Model.luotxem" />
    </div>

    <div class="form-group">
        <label for="ngaycapnhat">Updated Date</label>
        <input type="datetime-local" class="form-control" id="ngaycapnhat" name="ngaycapnhat" value="@Model.ngaycapnhat?.ToString("yyyy-MM-ddTHH:mm:ss")" />
    </div>

    <div class="form-group">
        <label for="xuatban">Publish</label>
        <input type="checkbox" class="form-check-input" id="xuatban" name="xuatban" @(Model.xuatban ?? false ? "checked" : "") />
    </div>

    <div class="form-group">
        <label for="machude">Category</label>
        <select class="form-control" id="machude" name="machude" required>
            <option value="">Select a Category</option>
            @foreach (var category in (List<ChuDe>)ViewData["ChuDeList"])
            {
                var selected = category.machude == Model.machude ? "selected" : "";
                <option value="@category.machude" selected="@selected">
                    @category.tenchude
                </option>
            }
        </select>
        @if (ViewData.ModelState["machude"]?.Errors.Count > 0)
        {
            <span class="text-danger">@ViewData.ModelState["machude"]?.Errors[0]?.ErrorMessage</span>
        }
    </div>

    <button type="submit" class="btn btn-primary">Create</button>
</form>
